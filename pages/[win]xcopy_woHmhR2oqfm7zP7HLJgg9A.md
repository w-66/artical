# \[win]xcopy

复制文件和目录树。

```纯文本
复制文件和目录树。

XCOPY source [destination] [/A | /M] [/D[:date]] [/P] [/S [/E]] [/V] [/W]
                           [/C] [/I] [/Q] [/F] [/L] [/G] [/H] [/R] [/T] [/U]
                           [/K] [/N] [/O] [/X] [/Y] [/-Y] [/Z] [/B] [/J]
                           [/EXCLUDE:file1[+file2][+file3]...] [/COMPRESS]

  source       指定要复制的文件。
  destination  指定新文件的位置和/或名称。
  /A           仅复制有存档属性集的文件，
               但不更改属性。
  /M           仅复制有存档属性集的文件，
               并关闭存档属性。
  /D:m-d-y     复制在指定日期或指定日期以后更改的文件。
               如果没有提供日期，则只复制
               源时间比目标时间新的文件。
  /EXCLUDE:file1[+file2][+file3]...
               指定含有字符串的文件列表。每个字符串
               在文件中应位于单独的一行。如果任何
               字符串与复制文件的绝对路径的任何部分相符，
               则排除复制该文件。例如，
               指定如 \obj\ 或 .obj 的字符串会分别
               排除目录 obj 下面的所有文件或带有
               .obj 扩展名的所有文件。
  /P           创建每个目标文件之前均进行提示。
  /S           复制目录和子目录，不包括空目录。
  /E           复制目录和子目录，包括空目录。
               与 /S /E 相同。可以用来修改 /T。
  /V           验证每个新文件的大小。
  /W           提示在复制前按键。
  /C           即使有错误，也继续复制。
  /I           如果目标不存在，且要复制多个文件，
               则假定目标必须是目录。
  /Q           复制时不显示文件名。
  /F           复制时显示完整的源文件名和目标文件名。
  /L           显示要复制的文件。
  /G           允许将加密文件复制到
               不支持加密的目标。
  /H           隐藏文件和系统文件也会复制。
  /R           覆盖只读文件。
  /T           创建目录结构，但不复制文件。不
               包括空目录或子目录。/T /E 包括
               空目录和子目录。
  /U           只复制已经存在于目标中的文件。
  /K           复制属性。一般的 Xcopy 会重置只读属性。
  /N           用生成的短名称复制。
  /O           复制文件所有权和 ACL 信息。
  /X           复制文件审核设置(隐含 /O)。
  /Y           取消提示以确认要覆盖
               现有目标文件。
  /-Y          触发提示，以确认要覆盖
               现有目标文件。
  /Z           在可重新启动模式下复制网络文件。
  /B           复制符号链接本身与链接目标。
  /J           复制时不使用缓冲的 I/O。推荐复制大文件时使用。
  /COMPRESS    如果适用，在传输期间请求网络
               压缩。

开关 /Y 可以预先在 COPYCMD 环境变量中设置。
这可能被命令行上的 /-Y 覆盖。
```

# 示例

示例

```纯文本
/S 复制非空的目录和子目录。如果省略 /s，xcopy 将在一个目录中工作。

例1,
xcopy /s d:\123 e:\kkk\
复制d:\123目录下所有文件（夹）到e:\kkk，不包括空的子目录。（默认情况下，xcopy 不复制隐藏或系统文件）
------------------------------------------------------------------------------------------------------

/E 复制所有子目录，包括空目录。同时使用 /e、/s 和 /t 命令行选项。

例2,
xcopy /e d:\123 e:\kkk\
复制d:\123目录下所有文件（夹）到e:\kkk，包括空的子目录。（默认情况下，xcopy 不复制隐藏或系统文件）
------------------------------------------------------------------------------------------------------

/H 复制具有隐藏和系统文件属性的文件。默认情况下xcopy 不复制隐藏或系统文件。

例3,
xcopy /e /h d:\123 e:\kkk\
复制d:\123目录下所有文件（夹）到e:\kkk，包括空的子目录。加上了/h参数后，xcopy 复制隐藏或系统的文件
------------------------------------------------------------------------------------------------------

/T 只复制子目录结构（即目录树），不复制文件。要复制空目录，必须包含 /e 选项。
------------------------------------------------------------------------------------------------------

/Y 禁止提示您确认要覆盖现存的目标文件。
当目标目录中已经存在了和源目录中即将复制的文件相同文件名的时候，就会出现“改写 X:\XXX  (Yes/No/All)?”
这样的提示，让你选择是覆盖、不覆盖还是全部覆盖时，通过参数/y，可以实现重名文件无须确认直接覆盖。
------------------------------------------------------------------------------------------------------

★注意指定 Destination 是文件还是目录。
如果 Destination 不包含现有目录且不以反斜杠 (\) 结尾，会出现下列消息：

 Does destination specify a file name
 or directory name on the target
 (F = file, D = directory)?

系统将会询问你
目标 X:\XXX 是文件名还是目录名
(F = 文件，D = 目录)?
 如果要将一个或多个文件复制到一个文件，请按 F。如果要将一个或多个文件复制到一个目录，请按 D。
------------------------------------------------------------------------------------------------------

思考：

比较一下xcopy /e d:\123 e:\kkk\  和 xcopy /e d:\123 e:\kkk 两者之间有什么不同？
两者都是复制d:\123目录下所有文件（夹）到e:\kkk，包括空的子目录，但前者不会询问你
目标e:\kkk 是文件名还是目录名
(F = 文件，D = 目录)?
```
