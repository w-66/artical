# \[win]ping

# 操作

-   ping选项
    ```纯文本
        -t             Ping 指定的主机，直到停止。 
                       若要查看统计信息并继续操作，请键入 Ctrl+Break；
                       若要停止，请键入 Ctrl+C。
        -a             将地址解析为主机名。
        -n count       要发送的回显请求数。
         -l size        发送缓冲区大小。 
        -f             在数据包中设置“不分段”标记(仅适用于 IPv4)。
        -i TTL         生存时间。
        -v TOS         服务类型(仅适用于 IPv4。该设置已被弃用，
                       对 IP 标头中的服务类型字段没有任何
                       影响)。
         -r count       记录计数跃点的路由(仅适用于 IPv4)。 
        -s count       计数跃点的时间戳(仅适用于 IPv4)。
        -j host-list   与主机列表一起使用的松散源路由(仅适用于 IPv4)。
        -k host-list   与主机列表一起使用的严格源路由(仅适用于 IPv4)。
        -w timeout     等待每次回复的超时时间(毫秒)。
        -R             同样使用路由标头测试反向路由(仅适用于 IPv6)。
                       根据 RFC 5095，已弃用此路由标头。
                       如果使用此标头，某些系统可能丢弃
                       回显请求。
         -S srcaddr     要使用的源地址。 
        -c compartment 路由隔离舱标识符。
        -p             Ping Hyper-V 网络虚拟化提供程序地址。
        -4             强制使用 IPv4。
        -6             强制使用 IPv6。
    ```
    ## 解析
    -   `ping -r count`

        在“记录路由”字段中记录传出和返回数据包的路由，探测经过的路由个数，但最多只能跟踪到9个路由。
        > 与 `tracert`类似？



# 参数意义

`bytes`：数据包大小，也就是字节。 &#x20;

`time`：响应时间，这个时间越小，说明你连接这个地址速度越快。

`TTL`：Time To Live,表示DNS记录在DNS服务器上存在的时间，它是IP协议包的一个值，告诉路由器该数据包何时需要被丢弃。可以通过Ping返回的TTL值大小，粗略地判断目标系统类型是Windows系列还是UNIX/Linux系列。

# 应用

-   TTL值估计（判断）目标操作系统

    默认情况下，Linux系统的TTL值为64或255，

    UNIX 及类 UNIX 操作系统的TTL值为255。 &#x20;

    WindowsNT/2000/XP系统的TTL值为128，

    Windows98系统的TTL值为32，

    微软 Windows 95 操作系统TTL 字段值为 32 &#x20;

    Compaq Tru64 5.0 的 TTL 字段值为 64 &#x20;
-   批量ping网段
    ```纯文本
    for /L %D in (1,1,255) do ping 10.43.1.%D
    ```
    `(1,1,255)`：划分一个范围，1到255，步长为1

    `(5,2,255)`：5到255，步长为2

